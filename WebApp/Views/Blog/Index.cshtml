@using Domain
@using Microsoft.AspNetCore.Mvc.Localization
@model IEnumerable<BlogPost>
@inject IHtmlLocalizer<SharedResource> Localizer

@{
    var culture = Thread.CurrentThread.CurrentUICulture.TwoLetterISOLanguageName;
    var isFa = culture == "fa";
}

<div class="max-w-5xl mx-auto py-10">
    <h1 class="text-3xl font-bold mb-6">@Localizer["Blog"]</h1>

    <div class="grid md:grid-cols-2 gap-6">
        @foreach (var item in Model)
        {
            <a asp-action="Details" asp-route-slug="@item.Slug"
               class="block bg-white dark:bg-gray-900 shadow rounded-lg overflow-hidden border dark:border-gray-800">

                @if (!string.IsNullOrEmpty(item.ThumbnailPath))
                {
                    <img src="~/uploads/blog/@item.ThumbnailPath" class="w-full h-48 object-cover" />
                }

                <div class="p-4">
                    <h2 class="text-xl font-semibold mb-2">
                        @(isFa ? item.TitleFa : item.TitleEn)
                    </h2>

                    <p class="text-sm text-gray-500 dark:text-gray-400 mb-2">
                        @item.PublishedAt.ToLocalTime().ToString("yyyy/MM/dd HH:mm")
                    </p>

                    <p class="text-gray-700 dark:text-gray-300 text-sm line-clamp-3">
                        @(isFa ? item.SummaryFa : item.SummaryEn)
                    </p>
                </div>
            </a>
        }
    </div>
</div>
